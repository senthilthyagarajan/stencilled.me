<!DOCTYPE html>
<meta charset="utf-8">
<style>

.background {
  fill: none;
  pointer-events: all;
}

.feature {
  fill: #ccc;
  cursor: pointer;
}

.feature.active {
  fill: orange;
}

.mesh {
  fill: none;
  stroke: #fff;
  stroke-linecap: round;
  stroke-linejoin: round;
}

</style>
<body>
  <script src="https://d3js.org/d3.v3.min.js"></script>
<script src="https://d3js.org/topojson.v1.min.js"></script>
<script>

var width = 960,
    height = 500,
    active = d3.select(null);

var projection = d3.geo.albersUsa()
    .scale(1000)
    .translate([width / 2, height / 2]);

var path = d3.geo.path()
    .projection(projection);

var svg = d3.select("body").append("svg")
    .attr("width", width)
    .attr("height", height);



var g = svg.append("g")
    .style("stroke-width", "1.5px");

d3.json("https://gist.githubusercontent.com/cyrilcherian/0cc04f7132ee7402ce40/raw/f99e5fb2879ed587c9397abaef4c9720d6b66dff/us.json", function(polygon) {

  g.selectAll("path")
      .data(topojson.feature(polygon, polygon.objects.states).features)
    .enter().append("path")
      .attr("d", path)
      .style("fill", function(d){ if(d.id==22){return "red"}})
      .attr("class", "feature")


  g.append("path")
      .datum(topojson.mesh(polygon, polygon.objects.states, function(a, b) { return a !== b; }))
      .attr("class", "mesh")
      .attr("d", path);

      var coordinates0 = polygon.objects.states[0]
          coordinates1 = circle(coordinates0),
          path = svg.append("path"),
          d0 = "M" + coordinates0.join("L") + "Z",
          d1 = "M" + coordinates1.join("L") + "Z";

      loop();

      function loop() {
        path
            .attr("d", d0)
          .transition()
            .duration(5000)
            .attr("d", d1)
          .transition()
            .delay(5000)
            .attr("d", d0)
            .each("end", loop);
      }

});
function circle(coordinates) {
  var circle = [],
      length = 0,
      lengths = [length],
      polygon = d3.geom.polygon(coordinates),
      p0 = coordinates[0],
      p1,
      x,
      y,
      i = 0,
      n = coordinates.length;

  // Compute the distances of each coordinate.
  while (++i < n) {
    p1 = coordinates[i];
    x = p1[0] - p0[0];
    y = p1[1] - p0[1];
    lengths.push(length += Math.sqrt(x * x + y * y));
    p0 = p1;
  }

  var area = polygon.area(),
      radius = Math.sqrt(Math.abs(area) / Math.PI),
      centroid = polygon.centroid(-1 / (6 * area)),
      angleOffset = -Math.PI / 2, // TODO compute automatically
      angle,
      i = -1,
      k = 2 * Math.PI / lengths[lengths.length - 1];

  // Compute points along the circleâ€™s circumference at equivalent distances.
  while (++i < n) {
    angle = angleOffset + lengths[i] * k;
    circle.push([
      centroid[0] + radius * Math.cos(angle),
      centroid[1] + radius * Math.sin(angle)
    ]);
  }

  return circle;
}



</script>
