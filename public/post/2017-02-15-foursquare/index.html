<!DOCTYPE html>
<html>
    <head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0, shrink-to-fit=no">

        
        <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.1/css/bootstrap.min.css" integrity="sha384-WskhaSGFgHYWDcbwN70/dfYBj47jz9qbsMId/iRN3ewGhXQFZCSftd1LZCfmhktB" crossorigin="anonymous">

        <link href="https://fonts.googleapis.com/css?family=Ubuntu|Ubuntu+Mono" rel="stylesheet">

        <title>Where do people eat in Austin ??</title>

        <link rel="stylesheet" href="/css/stylesheet.css">
        
        <script async src="https://www.googletagmanager.com/gtag/js?id=UA-91161205-1"></script>
        <script>
          window.dataLayer = window.dataLayer || [];
          function gtag(){dataLayer.push(arguments);}
          gtag('js', new Date());
          gtag('config', 'UA-91161205-1');
        </script>
    </head>
    <body>
      <div class="container-fluid">
        <nav class="navbar navbar-expand-md navbar-light">
          
          <span class="navbar-brand mb-0 h1"></span>

          <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavAltMarkup" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle Navigation" name="button">
            <span class="navbar-toggler-icon"></span>
          </button>

          <div class="collapse navbar-collapse" id="navbarNavAltMarkup">
            <div class="navbar-nav">
              <a class="nav-item nav-link " href="/">Home</a>
              
                <a class="nav-item nav-link" href="https://github.com/senthilthyagarajan" target="_blank">GitHub</a>
              
              
              <a class="nav-item nav-link " href="/page/about/">About</a>
              <a class="nav-item nav-link " href="/page/resume/">Resume</a>
              <a class="nav-item nav-link " href="/page/blogroll/">Blogroll</a>
              <a class="nav-item nav-link " href="/page/reading/">Reading</a>
              <a class="nav-item nav-link " href="https://twitter.com/TheRascala">Twitter</a>
            </div>
          </div>
        </nav>

        <section id="page-title">
          <h1><a href="/">Stencilled</a></h1>
          <span id="author-name">
            <h6><a href="/page/about/">Senthil Thyagarajan</a></h6>
          </span>
        </section>


<div class="blog-post">
  <h1>Where do people eat in Austin ??</h1>
  <div class="blog-post-subheader">
  
  </div>
  <div class="blog-post-content">
    <p>Recently I visited Austin and many of my friends had mentioned about the variety in food options here.
So my wife and I decided to search for places to eat on the foursquare app. As a standard search filter
with high rating we ended up at pretty good places and foursquare did alert us to checkins whenever we
reached a place. Post the trip I wanted to see how many people do checkins using this app and how the checkins are
correlated with the ratings.</p>
<p>The first step here is to get the data . So I started to play around with the foursquare API
and started working around the URL on what category(food,places to see, etc) to get the data .
The authentication process for the foursquare API was a bit tricky but with my google-fu
(( and special mention to the GIS tribe ) I was able to get going. Below is how you would
get the client id and client secret when you create a new app.</p>
<p><img alt="This is an image" loading="lazy" src="/post/2017-02-15-foursquare/createfsqapi.png"></p>
<p>The idea was how to do it for many places across the country. So I decided to use R to scrap and clean the data. You can find the code here.</p>
<!-- raw HTML omitted -->
<!-- raw HTML omitted -->
<p>Once this was done the next part was to how do I visualize this data . Since I have been trying my hands on d3js I
used the cleaned output from R in CSV format to display how checkins and ratings vary for these places using bubble chart.</p>
<!-- raw HTML omitted -->
<!-- raw HTML omitted -->
<!-- raw HTML omitted -->
<pre><code>           &lt;script&gt; src = &quot;https://d3js.org/d3.v4.min.js&quot; &gt;&lt;/script&gt;
           &lt;!-- &lt;link href=&quot;//fonts.googleapis.com/css?family=Raleway:400,300,600&quot; rel=&quot;stylesheet&quot; type=&quot;text/css&quot;&gt; --&gt;
           &lt;script src=&quot;https://cdnjs.cloudflare.com/ajax/libs/d3/4.4.4/d3.min.js&quot; type=&quot;text/JavaScript&quot;&gt;&lt;/script&gt;
           &lt;script src=&quot;https://cdnjs.cloudflare.com/ajax/libs/d3-queue/3.0.3/d3-queue.min.js&quot;&gt;&lt;/script&gt;
           &lt;script src=&quot;https://cdnjs.cloudflare.com/ajax/libs/topojson/2.2.0/topojson.min.js&quot;&gt;&lt;/script&gt;
           &lt;!-- JS–––––––––––––––––––––––––––––––––––––––––––––––––– --&gt;
           &lt;script src=&quot;https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js&quot;&gt;&lt;/script&gt;
           &lt;script src=&quot;https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js&quot;&gt;&lt;/script&gt;
           &lt;script&gt;
           var svg = d3.select(&quot;svg&quot;),
               width = +svg.attr(&quot;width&quot;),
               height = +svg.attr(&quot;height&quot;);

               var format = d3.format(&quot;,d&quot;);

               var color = d3.scaleOrdinal(d3.schemeCategory10);

               var pack = d3.pack()
                   .size([width, width])
                   .padding(1.5);

               var inputs = {};

               d3.csv(&quot;austin_fsq.csv&quot;, function(d) {
                   d.sno = +d.sno;
                   return d;
               }, function(error, data) {
                   if (error) throw error;

                   d3.selectAll(&quot;input&quot;).on(&quot;change&quot;, function(){
                     inputs[this.id] = +this.value;
                     console.log(inputs.myValue + &quot;-&quot; + inputs.myRating)
                     if(inputs.myValue &amp;&amp; inputs.myRating){
                        var classes = data.filter(d =&gt; d.value &lt; inputs.myValue &amp;&amp; d.rating &gt;= inputs.myRating);
                       draw(classes);
                     }
                   })

                   function draw(classes) {

                     d3.selectAll(&quot;svg &gt; *&quot;).remove();

                       console.log(classes.length);
                       var root = d3.hierarchy({
                               children: classes
                           })
                           .sum(function(d) {
                               return d.value;
                           })
                           .each(function(d) {
                               if (id = d.data.id) {
                                   var id, i = id.lastIndexOf(&quot;.&quot;);
                                   d.id = id;
                                   d.package = id.slice(0, i);
                                   d.class = id.slice(i + 1);
                               }
                           });

                       var node = svg.selectAll(&quot;.node&quot;)
                           .data(pack(root).leaves())
                           .enter().append(&quot;g&quot;)
                           .attr(&quot;class&quot;, &quot;node&quot;)
                           .attr(&quot;transform&quot;, function(d) {
                               return &quot;translate(&quot; + d.x + &quot;,&quot; + d.y + &quot;)&quot;;
                           });

                       node.append(&quot;circle&quot;)
                           .attr(&quot;id&quot;, function(d) {
                               return d.id;
                           })
                           .attr(&quot;r&quot;, function(d) {
                               return d.r;
                           })
                           .style(&quot;fill&quot;, function(d) {
                               return color(d.package);
                           });

                       node.append(&quot;clipPath&quot;)
                           .attr(&quot;id&quot;, function(d) {
                               return &quot;clip-&quot; + d.id;
                           })
                           .append(&quot;use&quot;)
                           .attr(&quot;xlink:href&quot;, function(d) {
                               return &quot;#&quot; + d.id;
                           });

                       node.append(&quot;text&quot;)
                           .attr(&quot;clip-path&quot;, function(d) {
                               return &quot;url(#clip-&quot; + d.id + &quot;)&quot;;
                           })
                           .selectAll(&quot;tspan&quot;)
                           .data(function(d) {
                               return d.class.split(/(?=[A-Z][^A-Z])/g);
                           })
                           .enter().append(&quot;tspan&quot;)
                           .attr(&quot;x&quot;, 0)
                           .attr(&quot;y&quot;, function(d, i, nodes) {
                               return 13 + (i - nodes.length / 2 - 0.5) * 10;
                           })
                           .text(function(d) {
                               return d;
                           });

                       node.append(&quot;title&quot;)
                           .text(function(d) {
                               return d.data.id + &quot;\n&quot; + format(d.value);
                           });
                   }
               });
           &lt;/script&gt;
</code></pre>
  </div>
</div>

      <footer>
        <hr>
        <small>
          &copy; 2025 Senthil Thyagarajan.
          Powered by <a href="https://gohugo.io/" target="_blank">Hugo</a> using the <a href="https://github.com/arjunkrishnababu96/basics" target="_blank">Basics</a> theme  |  <a href="http://www.stencilled.me/index.xml" target="_blank">RSS Feeds</a>
        </small>
      </footer>
    </div> 

    
    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js" integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.1/js/bootstrap.min.js" integrity="sha384-smHYKdLADwkXOn1EmN1qk/HfnUcbVRZyYmZ4qpPea6sjB/pTJ0euyQp0Mk8ck+5T" crossorigin="anonymous"></script>
  </body>
</html>

